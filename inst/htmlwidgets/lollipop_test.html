<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <!--<script src="htmlwidgets.js"></script>-->
    <script src="lib/d3/d3.v4.min.js"></script>
    <link href="lib/g3-lollipop/style.min.css" rel="stylesheet" />
    <script src="lib/g3-lollipop/g3-lollipop.js"></script>
    <!--<script src="lib/g3Lollipop.js"></script>-->
    <script>
        var x =
            '{"domainData":{"symbol":"TP53","uniprot":"P04637","length":393,"pfam":[{"hmm.acc":"PF08563","hmm.name":"P53_TAD","start":5,"end":29,"type":"Motif"},{"hmm.acc":"PF00870","hmm.name":"P53","start":95,"end":289,"type":"Domain"},{"hmm.acc":"PF07710","hmm.name":"P53_tetramer","start":319,"end":358,"type":"Motif"}]},"snvData":[{"Hugo_Symbol":"TP53","Protein_Change":"S90T","Sample_ID":"ACINAR26","Mutation_Type":"Missense_Mutation","Chromosome":17,"Start_Position":7579419,"End_Position":7579419,"Reference_Allele":"A","Variant_Allele":"T","Mutation_Class":"Missense","AA_Position":90},{"Hugo_Symbol":"TP53","Protein_Change":"Q317Sfs*28","Sample_ID":"ACINAR01","Mutation_Type":"Frame_Shift_Del","Chromosome":17,"Start_Position":7576897,"End_Position":7576897,"Reference_Allele":"G","Variant_Allele":"-","Mutation_Class":"Truncating","AA_Position":317},{"Hugo_Symbol":"TP53","Protein_Change":"L330Ffs*15","Sample_ID":"ACINAR25","Mutation_Type":"Frame_Shift_Del","Chromosome":17,"Start_Position":7576858,"End_Position":7576858,"Reference_Allele":"G","Variant_Allele":"-","Mutation_Class":"Truncating","AA_Position":330}],"plotSettings":{"background":"#f2f2f2","chartType":"pie","width":640,"lollipopTrackHeight":320,"annoHeight":30,"legendTitle":"mutation class","domainTextFont":"normal 10px/80% Arial, Helvetica, sans-serif","domainTextColor":"white"},"snvDataFormat":{"x":"AA_Position","y":"Protein_Change","factor":"Mutation_Class"},"domainDataFormat":{"symbol":"symbol","name":"uniprot","length":"length","domainType":"pfam","details":{"start":"start","end":"end","ac":"hmm.acc","name":"hmm.name"}}}';

        x = JSON.parse(x);
        //var textDIV = el.appendChild(document.createElement('div'));
        //console.log(x.domainData);
        //console.log(JSON.stringify(x));
        //textDIV.innerText = JSON.stringify(x.domainData);
        document.addEventListener('DOMContentLoaded', function () {
            var svgDom = document.createElement('svg');
            var el = document.getElementById("htmlwidget-a7c489bf4af4042993be");
            el.appendChild(svgDom);

            var snvData = x.snvData;
            var domainData = x.domainData;
            var snvDataFormat = x.snvDataFormat;
            var domainDataFormat = x.domainDataFormat;
            var plotSettings = x.plotSettings;

            console.log("snvData");
            console.log(snvData);

            console.log("domainData");
            console.log(domainData);

            console.log("snvDataFormat");
            console.log(snvDataFormat);
        

            console.log("domainDataFormat");
            console.log(domainDataFormat);

            console.log("plotSettings");
            console.log(plotSettings);

            var lollipop = g3.Lollipop('svg');

            lollipop.data.snvData = snvData;
            lollipop.data.domainData = domainData;
            lollipop.format.snvData = snvDataFormat;
            lollipop.format.domainData = domainDataFormat;
            lollipop.setOptions(plotSettings);

            lollipop.draw();
        });
    </script>
</head>

<body style="background-color:white;">
    <div id="htmlwidget_container">
        <div id="htmlwidget-a7c489bf4af4042993be" style="width:960px;height:500px;" class="g3Lollipop html-widget"></div>
    </div>
</body>

</html>